function renderSimpleImage(image_path, t_hist, x_f16_hist, ...
    flightLimits, waypoints, WF_config)

% Plots and saves a 3d rendering of the aircraft path and attitude
% throughout the maneuver. Pass/fail conditions are displayed in the image.
% This script requires that "SimResults.mat" exists in the workspace. This
% .mat file is automatically generated by RunF16Sim with the variable
% "analysisOn" set to true.
%
% <a href="https://github.com/pheidlauf/AeroBenchVV">AeroBenchVV</a>
% Copyright: GNU General Public License 2017
%
% See also: RUNF16SIM, NEW_OBJECT, FLYPATH

%% Create animation of F16 Maneuver

% Run required package_setup for flypath3d
aerobench_path = getAeroBenchPath();
flypath_setup = fullfile(aerobench_path,...
    'src','main','viewers','flypath3d','package_setup.m');
run(flypath_setup)

% Flypath3D Trajectory Visualization
% East North Up Pitch Yaw Roll
trajectory = x_f16_hist([11 10 12 5 6 4],:);

% Create a flypath3d object
new_object('aircraft.mat', trajectory,...
    'model','f-16.mat',...
    'edge',[0 0 0],'face',[0 0 0],'alpha',1,...
    'path','on','pathcolor',[.89 .0 .27],'pathwidth',1,...
    'scale', 25);

% Create aircraft trajectory visualization
flypath('aircraft.mat',...
    'animate','off','step', 150,...
    'axis','on','axiscolor',[0 0 0],'color',[1 1 1],...
    'font','Georgia','fontsize',6,...
    'view', [-37.5, 30],...
    'window',[1000 1000],...
    'figname','Flypath Simple Image');
hold on;

% Draw Points of Interest
if(nargin > 4)
    plotWaypoints(waypoints, WF_config.WP_RANGE_THRESHOLD);
end

% Draw altitude floor
ground = flightLimits.altMin;
xl = round(xlim);
yl = round(ylim);
[x_mesh,y_mesh] = meshgrid(xl(1):100:xl(2),yl(1):100:yl(2));
z_mesh = ones(size(x_mesh))*ground;
surf(x_mesh,y_mesh,z_mesh,...
    'FaceColor',[.8 .8 .8],...
    'EdgeColor',[.7 .7 .7],...
    'FaceAlpha',0.75,...                                 
    'EdgeAlpha',1);
xlim(xl);
ylim(yl);
        
% Add title with info
str1 = sprintf('Simulation Time: (%2.0f:%2.0f) sec',...
    t_hist(1), t_hist(end));

titlestr = {str1};
title(titlestr, 'FontSize', 16, 'FontName','FixedWidth');
xlabel('East (ft)');
ylabel('North (ft)');
zlabel('Alt (ft)');

% Save Figure
print(image_path, '-dpng')
